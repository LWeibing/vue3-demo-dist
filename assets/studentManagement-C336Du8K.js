import"./request-CcA2miBI.js";/* empty css                 *//* empty css                        *//* empty css                  *//* empty css                    */import{g as L,r as Q,e as X,a as Y}from"./student-8w4GmALF.js";import{d as Z,m as H,a as b,r as B,D as J,G as ee,c as ae,b as r,g as s,e,w as a,q as _,A as g,N as k,F as te,O as le,l as oe,P as ne,Q as se,R as de,o as m,S as ue,t as F,T as ie,U as ce,V as re,i as y,W as me,X as pe,j as _e,k as ge,Y as fe,Z as ve,$ as be,E as ye,_ as Ve}from"./index-Cw7H2qAt.js";const he={class:"filter_box"},ke={class:"page_box"},Ce={class:"dialog-header"},Ee={class:"dialog-footer"},C="100px",we=Z({__name:"studentManagement",setup(Se){const M=H().user.function.student,E=b([]),d=b(!1),f=b("");let i=B({pageNum:1,pageSize:10,total:0});const v=B({}),n=b({id:0,name:"",age:0,gender:""});J(()=>{u()}),ee(v,()=>{u()});const u=async()=>{await L({...i,searchKey:v}).then(t=>{E.value=t.data,i.total=t.total})},N=t=>{i.pageNum=t,u()},I=t=>{i.pageSize=t,u()},T=t=>{re.confirm("请确认是否删除该学员？","删除确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await Q(t).then(o=>{y({message:o.message,type:"success"}),u()})}).catch(()=>{y({message:"已取消操作",type:"info"})})},z=t=>{f.value="edit",n.value=t,d.value=!0},U=async()=>{await X(n.value).then(t=>{y({message:t.message,type:"success"}),d.value=!1,u()})},D=async()=>{await Y(n.value).then(t=>{y({message:t.message,type:"success"}),d.value=!1,u()})},R=()=>{f.value="add",d.value=!0},w=()=>{n.value={},d.value=!1},V=t=>!!M.includes(t);return(t,o)=>{const S=me,A=le,c=oe,p=pe,P=ne,$=se,j=_e,h=ge,G=fe,x=ve,O=be,W=ye,q=de;return m(),ae(te,null,[r("div",he,[r("label",null,[s(" 性别： "),e(A,{clearable:"",modelValue:v.gender,"onUpdate:modelValue":o[0]||(o[0]=l=>v.gender=l),filterable:"",placeholder:"请选择性别",style:{width:"240px"}},{default:a(()=>[e(S,{value:"M",label:"男"}),e(S,{value:"F",label:"女"})]),_:1},8,["modelValue"])]),V("add")?(m(),_(c,{key:0,icon:g(ue),onClick:R},{default:a(()=>[s("添加学员")]),_:1},8,["icon"])):k("",!0)]),e(P,{data:E.value,border:""},{default:a(()=>[e(p,{prop:"id",label:"ID"}),e(p,{prop:"name",label:"姓名"}),e(p,{prop:"age",label:"年龄"}),e(p,{prop:"gender",label:"性别"},{default:a(l=>[r("div",null,F(l.row.gender==="M"?"男":"女"),1)]),_:1}),e(p,{prop:"action",label:"操作"},{default:a(l=>[V("edit")?(m(),_(c,{key:0,type:"primary",icon:g(ie),onClick:K=>z(l.row)},{default:a(()=>[s("编辑")]),_:2},1032,["icon","onClick"])):k("",!0),V("remove")?(m(),_(c,{key:1,type:"danger",icon:g(ce),onClick:K=>T(l.row.id)},{default:a(()=>[s("删除")]),_:2},1032,["icon","onClick"])):k("",!0)]),_:1})]),_:1},8,["data"]),r("div",ke,[e($,{small:"",background:"",layout:"total,sizes,prev, pager, next,jumper",total:g(i).total,class:"mt-4","hide-on-single-page":g(i).total>10,onCurrentChange:N,onSizeChange:I},null,8,["total","hide-on-single-page"])]),e(q,{modelValue:d.value,"onUpdate:modelValue":o[4]||(o[4]=l=>d.value=l),width:"500",onClose:w},{header:a(()=>[r("div",Ce,F(f.value==="edit"?"修改学员":"添加学员"),1)]),footer:a(()=>[r("div",Ee,[e(c,{onClick:w},{default:a(()=>[s("取消")]),_:1}),f.value==="edit"?(m(),_(c,{key:0,type:"primary",onClick:U},{default:a(()=>[s(" 确认 ")]),_:1})):(m(),_(c,{key:1,type:"primary",onClick:D},{default:a(()=>[s(" 确认 ")]),_:1}))])]),default:a(()=>[e(W,{model:n.value},{default:a(()=>[e(h,{label:"姓名","label-width":C},{default:a(()=>[e(j,{modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value.name=l),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(h,{label:"年龄","label-width":C},{default:a(()=>[e(G,{modelValue:n.value.age,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.age=l),min:1},null,8,["modelValue"])]),_:1}),e(h,{label:"性别","label-width":C},{default:a(()=>[e(O,{modelValue:n.value.gender,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.gender=l),class:"ml-4"},{default:a(()=>[e(x,{value:"M",size:"large"},{default:a(()=>[s("男")]),_:1}),e(x,{value:"F",size:"large"},{default:a(()=>[s("女")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),Ue=Ve(we,[["__scopeId","data-v-7cbc5dd5"]]);export{Ue as default};
