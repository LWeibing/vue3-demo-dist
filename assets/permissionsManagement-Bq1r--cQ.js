/* empty css             *//* empty css                    *//* empty css                  */import{h as S}from"./request-C_416Kza.js";import{u as q,e as D}from"./user-B7BnKzjv.js";import{d as R,a as n,m as G,D as P,c as r,b as v,e as d,w as t,a0 as $,l as j,a1 as z,o,F as b,v as f,g as m,q as g,t as V,a2 as A,a3 as H,a4 as J,a5 as K,_ as O}from"./index-CdsqAC9y.js";import{a as Q,g as W}from"./function-B-T-PDvP.js";const X=async k=>await S.request("get","/role/list",k),Y={class:"main"},Z={class:"aside"},ee={class:"article"},ae={style:{"margin-bottom":"20px"}},te=R({__name:"permissionsManagement",setup(k){const x=n([]),i=n([]),_=n([]),c=n(!1),p=n("0"),u=n({});G(),P(()=>{h(),w()});const w=async()=>{await X().then(e=>{x.value=e.data,_.value=e.data.map(s=>s.code)})},h=async()=>{await q().then(e=>{i.value=e.data,u.value=e.data[0].function})},C=(e,s)=>{p.value=e.index,u.value=i.value[e.index].function},E=async()=>{const e=i.value[p.value];e.function=u.value,await D(e).then(async()=>{c.value=!1,await Q(),await W(),await h()})};return(e,s)=>{const U=A,B=$,y=j,L=H,M=J,N=K,T=z;return o(),r("main",Y,[v("aside",Z,[d(B,{"tab-position":"left",class:"demo-tabs",onTabClick:C},{default:t(()=>[(o(!0),r(b,null,f(i.value,a=>(o(),g(U,{key:a.id,label:a.username},null,8,["label"]))),128))]),_:1})]),v("article",ee,[v("div",ae,[d(y,{onClick:s[0]||(s[0]=a=>c.value=!0)},{default:t(()=>[m("编辑")]),_:1}),d(y,{type:"primary",onClick:E,disabled:!c.value},{default:t(()=>[m("保存")]),_:1},8,["disabled"])]),d(T,{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=a=>_.value=a)},{default:t(()=>[(o(!0),r(b,null,f(x.value,(a,F)=>(o(),g(N,{key:F,name:a.code,disabled:!c.value},{title:t(()=>[m(V(a.name),1)]),default:t(()=>[d(M,{disabled:!c.value,modelValue:u.value[a.code],"onUpdate:modelValue":l=>u.value[a.code]=l},{default:t(()=>[(o(!0),r(b,null,f(a.children,(l,I)=>(o(),g(L,{key:I,label:l.name,value:l.code,disabled:p.value==="0"&&l.code==="permissionsManagement"},{default:t(()=>[m(V(l.name),1)]),_:2},1032,["label","value","disabled"]))),128))]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])]),_:2},1032,["name","disabled"]))),128))]),_:1},8,["modelValue"])])])}}}),ie=O(te,[["__scopeId","data-v-e6e0081c"]]);export{ie as default};
