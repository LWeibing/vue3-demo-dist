/* empty css             *//* empty css                 *//* empty css                        *//* empty css                  *//* empty css                    *//* empty css                  */import{h as w}from"./request-Bxt5PzGv.js";import{d as X,m as Y,a as y,r as M,D as Z,G as H,c as J,b as m,g as s,e,w as t,q as g,A as f,N as C,F as ee,O as te,l as ae,P as le,Q as oe,R as ne,o as p,S as se,t as N,T as de,U as ue,V as re,i as h,W as ie,X as ce,j as me,k as pe,Y as _e,Z as ge,$ as fe,E as ve,_ as be}from"./index-seHatmtm.js";const ye=async d=>await w.request("get","/student/search",d),he=async d=>await w.request("delete","/student/remove",{id:d}),we=async d=>await w.request("post","/student/edit",d),Ve=async d=>await w.request("post","/student/add",d),ke={class:"filter_box"},Ce={class:"page_box"},Ee={class:"dialog-header"},Se={class:"dialog-footer"},E="100px",xe=X({__name:"studentManagement",setup(d){const I=Y().user.function.student,S=y([]),u=y(!1),v=y("");let i=M({pageNum:1,pageSize:10,total:0});const b=M({}),n=y({id:0,name:"",age:0,gender:""});Z(()=>{r()}),H(b,()=>{r()});const r=async()=>{await ye({...i,searchKey:b}).then(a=>{S.value=a.data,i.total=a.total})},T=a=>{i.pageNum=a,r()},z=a=>{i.pageSize=a,r()},U=a=>{re.confirm("请确认是否删除该学员？","删除确认",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await he(a).then(o=>{h({message:o.message,type:"success"}),r()})}).catch(()=>{h({message:"已取消操作",type:"info"})})},q=a=>{v.value="edit",n.value=a,u.value=!0},D=async()=>{await we(n.value).then(a=>{h({message:a.message,type:"success"}),u.value=!1,r()})},R=async()=>{await Ve(n.value).then(a=>{h({message:a.message,type:"success"}),u.value=!1,r()})},A=()=>{v.value="add",u.value=!0},x=()=>{n.value={},u.value=!1},V=a=>!!I.includes(a);return(a,o)=>{const B=ie,P=te,c=ae,_=ce,$=le,j=oe,G=me,k=pe,O=_e,F=ge,W=fe,K=ve,L=ne;return p(),J(ee,null,[m("div",ke,[m("label",null,[s(" 性别： "),e(P,{clearable:"",modelValue:b.gender,"onUpdate:modelValue":o[0]||(o[0]=l=>b.gender=l),filterable:"",placeholder:"请选择性别",style:{width:"240px"}},{default:t(()=>[e(B,{value:"M",label:"男"}),e(B,{value:"F",label:"女"})]),_:1},8,["modelValue"])]),V("add")?(p(),g(c,{key:0,icon:f(se),onClick:A},{default:t(()=>[s("添加学员")]),_:1},8,["icon"])):C("",!0)]),e($,{data:S.value,border:""},{default:t(()=>[e(_,{prop:"id",label:"ID"}),e(_,{prop:"name",label:"姓名"}),e(_,{prop:"age",label:"年龄"}),e(_,{prop:"gender",label:"性别"},{default:t(l=>[m("div",null,N(l.row.gender==="M"?"男":"女"),1)]),_:1}),e(_,{prop:"action",label:"操作"},{default:t(l=>[V("edit")?(p(),g(c,{key:0,type:"primary",icon:f(de),onClick:Q=>q(l.row)},{default:t(()=>[s("编辑")]),_:2},1032,["icon","onClick"])):C("",!0),V("remove")?(p(),g(c,{key:1,type:"danger",icon:f(ue),onClick:Q=>U(l.row.id)},{default:t(()=>[s("删除")]),_:2},1032,["icon","onClick"])):C("",!0)]),_:1})]),_:1},8,["data"]),m("div",Ce,[e(j,{small:"",background:"",layout:"total,sizes,prev, pager, next,jumper",total:f(i).total,class:"mt-4","hide-on-single-page":f(i).total>10,onCurrentChange:T,onSizeChange:z},null,8,["total","hide-on-single-page"])]),e(L,{modelValue:u.value,"onUpdate:modelValue":o[4]||(o[4]=l=>u.value=l),width:"500",onClose:x},{header:t(()=>[m("div",Ee,N(v.value==="edit"?"修改学员":"添加学员"),1)]),footer:t(()=>[m("div",Se,[e(c,{onClick:x},{default:t(()=>[s("取消")]),_:1}),v.value==="edit"?(p(),g(c,{key:0,type:"primary",onClick:D},{default:t(()=>[s(" 确认 ")]),_:1})):(p(),g(c,{key:1,type:"primary",onClick:R},{default:t(()=>[s(" 确认 ")]),_:1}))])]),default:t(()=>[e(K,{model:n.value},{default:t(()=>[e(k,{label:"姓名","label-width":E},{default:t(()=>[e(G,{modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=l=>n.value.name=l),autocomplete:"off",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),e(k,{label:"年龄","label-width":E},{default:t(()=>[e(O,{modelValue:n.value.age,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.age=l),min:1},null,8,["modelValue"])]),_:1}),e(k,{label:"性别","label-width":E},{default:t(()=>[e(W,{modelValue:n.value.gender,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.gender=l),class:"ml-4"},{default:t(()=>[e(F,{value:"M",size:"large"},{default:t(()=>[s("男")]),_:1}),e(F,{value:"F",size:"large"},{default:t(()=>[s("女")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),De=be(xe,[["__scopeId","data-v-7cbc5dd5"]]);export{De as default};
